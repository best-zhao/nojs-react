webpackJsonp([3,4],{291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(t.HsbToRgb=function(e,t,a){var o={R:0,G:0,B:0};if(e=e>=360?0:e,t/=100,a/=100,0==t)o.R=255*a,o.G=255*a,o.B=255*a;else{var n=Math.floor(e/60)%6,r=e/60-n,i=a*(1-t),l=a*(1-t*r),s=a*(1-t*(1-r));switch(n){case 0:o.R=a,o.G=s,o.B=i;break;case 1:o.R=l,o.G=a,o.B=i;break;case 2:o.R=i,o.G=a,o.B=s;break;case 3:o.R=i,o.G=l,o.B=a;break;case 4:o.R=s,o.G=i,o.B=a;break;case 5:o.R=a,o.G=i,o.B=l}o.R=255*o.R,o.G=255*o.G,o.B=255*o.B}return o},t.RgbToHsb=function(e,t,a){var o,n,r,i=Math.min(Math.min(e,t),a),l=Math.max(Math.max(e,t),a),s={H:0,S:0,B:0};return i==l?s.H=0:l==e&&t>=a?s.H=(t-a)/(l-i)*60:l==e&&t<a?s.H=(t-a)/(l-i)*60+360:l==t?s.H=(a-e)/(l-i)*60+120:l==a&&(s.H=(e-t)/(l-i)*60+240),s.S=0==l?0:1-i/l,o=e/255,n=t/255,r=a/255,s.B=Math.max(Math.max(o,n),r),s.H=s.H>=360?0:s.H,s.S=100*s.S,s.B=100*s.B,s},t.RgbToHex=function(e,t,a,o){for(var n,r="",i=[Math.round(e),Math.round(t),Math.round(a)],l=0;l<i.length;l++)n=Number(i[l]).toString(16),1==n.length&&(n="0"+n),r+=n;return o&&(r="#"+r),r},t.HexToRgb=function(e){var t=o(e);if(!t)return e;for(var a=[],n=0;n<5;n+=2)a.push(parseInt("0x"+t.slice(n,n+2)));return{R:a[0],G:a[1],B:a[2]}},t.dealColor=function(e){e=String(e).toLowerCase().replace(/#/,"");var t=/^([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(3==e.length){for(var a="",o=0;o<3;o++)a+=e.slice(o,o+1)+e.slice(o,o+1);e=a}return e}})},292:function(e,t,a){e.exports=a.p+"img/lib/e1afc72d.choose.png"},293:function(e,t,a){e.exports=a.p+"img/lib/f9aeabdb.masks.png"},294:function(e,t,a){e.exports=a.p+"img/lib/3915f498.rolling.png"},295:function(e,t,a){e.exports=a.p+"img/lib/c7946f7d.rolling_B.png"},296:function(e,t,a){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=a(5);n(document.body).append("<style>.addIndex{z-index:99999}</style>");var r=function(e,t,a){this.drag=e,this.opt=a=a||{},this.move=t||e,this.delegat=!0===a.delegat,this.setDrag=a.setDrag,this.moveing=!1,this.onDragDown=a.onDragDown,this.onDragStart=a.onDragStart,this.MoveEvent=a.MoveEvent,this.UpEvent=a.UpEvent,this.dragLastPos=[],this.dragNowPos=[],this.mouseLastPos={},this.disable=!1,this.limit=a.limit,this.wrap=a.wrap,this.overflow=a.overflow,this.A=null,this.delay=this.opt.delay||9,this.delegat;var o=this;this.move.bind("mousedown.drag",function(e){o.DragDown(e)})};r.prototype={DragDown:function(e){if(this.disable)return!1;e=e||window.event;var t,a,r,i,l,s,c,u,p=this,h=n(e.target);if(this.delegat&&(h.attr("isdrag")||h.attr("isdragmove")?this.drag=h.attr("isdragmove")?h.closest("[isdrag]"):h:this.drag=null),this.drag&&this.drag.length){if(this.onDragDown&&0==this.onDragDown.call(this,e))return!1;for(this.moveing=!0,this.dragNowPos=[],this.dragLastPos=[],this.maxSize={L:[],T:[],B:[],R:[],W:null,H:null},this.group=this.group||this.drag,this.drag.addClass("addIndex"),r=0,i=this.drag.length;r<i;r++)a=this.drag.eq(r),t="static"===a.css("position"),l=t?a.offset().left:parseInt(a.css("left"),10)||0,s=t?a.offset().top:parseInt(a.css("top"),10)||0,this.wrap&&this.wrap.length&&(l-=this.wrap.offset().left-this.wrap.scrollLeft(),s-=this.wrap.offset().top-this.wrap.scrollTop()),c=a.outerWidth(),u=a.outerHeight(),this.dragLastPos.push({x:l,y:s}),t&&a.css({position:"absolute"}),a.css({left:l,top:s}),this.group&&!a.is(this.group)||(this.maxSize.L.push(l),this.maxSize.T.push(s),this.maxSize.R.push(l+c),this.maxSize.B.push(s+u));if(e.preventDefault(),this.maxSize.L=Math.min.apply(null,this.maxSize.L),this.maxSize.T=Math.min.apply(null,this.maxSize.T),this.maxSize.W=Math.max.apply(null,this.maxSize.R)-this.maxSize.L,this.maxSize.H=Math.max.apply(null,this.maxSize.B)-this.maxSize.T,this.limit&&(this.maxSize.l=this.limit.offset().left+parseInt(this.limit.css("border-left-width")),this.maxSize.t=this.limit.offset().top+parseInt(this.limit.css("border-top-width")),"static"!==this.limit.css("position")&&this.limit.find(a).length&&(this.maxSize.l=this.maxSize.t=0),this.maxSize.w=this.limit.innerWidth()-this.maxSize.W+this.maxSize.l,this.maxSize.h=this.limit.innerHeight()-this.maxSize.H+this.maxSize.t,this.overflow)){if("object"==o(this.overflow))var f=this.overflow,l=f.x,s=f.y,d=f.width,m=f.height;else{var l,s,d,m;l=s=d=m=this.overflow}this.maxSize.l-=l,this.maxSize.t-=s,this.maxSize.w+=d,this.maxSize.h+=m}if(this.mouseLastPos={x:e.clientX,y:e.clientY},this.onDragStart&&0==this.onDragStart.call(this,e))return!1;n(document).bind("mousemove.drag",function(e){p.DragMove(e)}).bind("mouseup.drag",function(e){p.DragUp(e)})}},DragMove:function(e){if(this.moveing&&!this.disable&&this.drag){e=e||window.event,e.preventDefault();var t,a,o,n,r,i={x:e.clientX-this.mouseLastPos.x,y:e.clientY-this.mouseLastPos.y},l=i.x,s=i.y,c=this.drag.length,u=this;for(this.limit&&(n=this.maxSize.L+l,r=this.maxSize.T+s,i.x=n<this.maxSize.l?this.maxSize.l-this.maxSize.L:l,i.x=n>this.maxSize.w?this.maxSize.w-this.maxSize.L:i.x,i.y=r<this.maxSize.t?this.maxSize.t-this.maxSize.T:s,i.y=r>this.maxSize.h?this.maxSize.h-this.maxSize.T:i.y),this.setOffset&&(i=this.setOffset.call(this,i)),l=i.x,s=i.y,t=0;t<c;t++)a=this.drag.eq(t),o=this.dragLastPos[t],this.dragNowPos[t]={x:o.x+l,y:o.y+s},a.css({left:this.dragNowPos[t].x,top:this.dragNowPos[t].y});this.MoveEvent&&(clearTimeout(u.A),u.A=setTimeout(function(){u.MoveEvent.call(u,{x:l,y:s,w:u.maxSize.W,h:u.maxSize.H,left:o.x+l,top:o.y+s},e)},u.delay))}},DragUp:function(e){if(!this.disable){var t=this;this.moveing=!1,n(document).off("mousemove.drag mouseup.drag"),this.drag.removeClass("addIndex"),t.A=clearTimeout(t.A),this.UpEvent&&this.UpEvent.call(this,e),this.maxSize=this.dragLastPos=this.dragNowPos=null,e.preventDefault()}}},e.exports=r},297:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=a(5),c=o(s),u=a(20),p=a(173),h=o(p),f=a(298),d=o(f),m=a(291);a(300);var b=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=Object.assign({},a.props);return o.color=(0,m.dealColor)(o.color),a.state={data:o},a}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=(t.visible,t.children,t.onChange),o=t.onSubmit;this.pop=h.default.create({trigger:"click",effect:"normal",nearby:(0,c.default)(u.ReactDOM.findDOMNode(this))}).onShow(function(){var t=u.React.createElement(d.default,{data:e.state.data,onChange:function(t){e.setState({data:t}),a&&a(t)},onSubmit:function(t){e.setState({data:t}),e.pop.setDisplay(!1),o&&o(t)},onCancel:function(t){return e.pop.setDisplay(!1)}});e.pop.setState({template:t})}).onHide(function(){e.pop.setState({template:null})})}},{key:"render",value:function(){var e=this.props.children,t=this.state.data;return e||u.React.createElement("span",{className:"color-picker"},u.React.createElement("span",{className:t.color?"inner":"transparent",style:{backgroundColor:"#"+t.color}}))}}]),t}(u.React.Component);t.default=b},298:function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=a(5),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=a(20),u=a(291),p=(0,s.default)(document),h=function(e){function t(e){o(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=a.props.data;a.state={hue:"rgb(255, 0, 0)",pos:{},data:Object.assign({h:0,s:0,b:100,R:255,G:255,B:255,color:"ffffff"},r)};var i="hsb";return r.color?i="color":r.R&&(i="rgb"),a.update(i,!0),a}return r(t,e),i(t,[{key:"startChoose",value:function(e,t){var a=this;this.moveHandle(e,t),p.on("mousemove.color",function(t){a.moveHandle(e,t)}).on("mouseup.color",function(e){p.off("mousemove.color mouseup.color")})}},{key:"moveHandle",value:function(e,t){var a=this.state.data,o=(0,s.default)(this.refs[e]),n="mask"==e,r={x:t.clientX,y:t.clientY},i=r.y+(0,s.default)(window).scrollTop()-o.offset().top;if(i=i<0?0:i,i=i>255?255:i,n){a.b=100-100*i/255;var l=r.x+(0,s.default)(window).scrollLeft()-o.offset().left;l=l<0?0:l,l=l>255?255:l,a.s=100*l/255}else{a.h=360-360*i/255;var c=this.state.maxHue=a.h>=360;a.h=c?0:a.h}t.preventDefault(),this.update("hsb")}},{key:"update",value:function(e,t){var a=this.props.onChange,o=this.state,n=o.data,r=(o.pos,n),i=r.h,l=r.s,s=r.b,c=r.R,p=r.G,h=r.B,f=r.color;if("hsb"==e){var d=(0,u.HsbToRgb)(i,l,s);c=d.R,p=d.G,h=d.B}else if("rgb"==e)var m=(0,u.RgbToHsb)(c,p,h),i=m.H,l=m.S,s=m.B;else{var b=(0,u.HexToRgb)(f);if("string"==typeof b||f.length<6)return void this.setState({data:n});var c=b.R,p=b.G,h=b.B,g=(0,u.RgbToHsb)(c,p,h),i=g.H,l=g.S,s=g.B}n={h:Math.round(i),s:Math.round(l),b:Math.round(s),color:(0,u.RgbToHex)(c,p,h).toUpperCase(),R:Math.round(c),G:Math.round(p),B:Math.round(h)};var v=(0,u.HsbToRgb)(i,100,100);this.state.hue="rgb("+Math.round(v.R)+", "+Math.round(v.G)+", "+Math.round(v.B)+")",t&&(this.state.maxHue=!i),this.getPos(n),t?this.state.data=n:(a&&a(n),this.setState({data:n}))}},{key:"getPos",value:function(e){var t=this.state,a=t.maxHue,o=t.pos,n=e.h,r=e.s,i=e.b;o.roll_top=a?-3:(360-n)/360*255-3,o.left=255*r/100-6,o.top=255*(100-i)/100-6}},{key:"changeHandle",value:function(e,t){var a=this.state.data,o=t.target.value;if(this.state.maxHue=!1,"color"==e)return a[e]=o,void this.update(e);o=parseInt(o),o=isNaN(o)?a[e]:o,e.toLowerCase()!=e?(o=o<0||o>255?a[e]:o,a[e]=o,this.update("rgb")):(o="h"==e?o<0||o>359?a[e]:o:o<0||o>100?a[e]:o,a[e]=o,this.update("hsb"))}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,a=e.onCancel,o=this.state,n=o.hue,r=o.data,i=o.pos;return c.React.createElement("div",{className:"color-picker-box clearfix"},c.React.createElement("div",{className:"mask",ref:"mask",style:{background:n},onMouseDown:this.startChoose.bind(this,"mask")},c.React.createElement("div",{className:"b"}),c.React.createElement("div",{className:"c",style:{top:i.top,left:i.left}})),c.React.createElement("div",{className:"roll",ref:"roll",onMouseDown:this.startChoose.bind(this,"roll")},c.React.createElement("div",{className:"c",style:{top:i.roll_top}})),c.React.createElement("div",{className:"r"},c.React.createElement("span",{className:"preview"},c.React.createElement("i",{style:{background:"#"+r.color}}),"颜色"),c.React.createElement("dl",null,c.React.createElement("dd",null,c.React.createElement("label",null,"H："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"h"),value:r.h}),"度"),c.React.createElement("dd",null,c.React.createElement("label",null,"S："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"s"),value:r.s}),"%"),c.React.createElement("dd",null,c.React.createElement("label",null,"B："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"b"),value:r.b}),"%")),c.React.createElement("dl",null,c.React.createElement("dd",null,c.React.createElement("label",null,"R："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"R"),value:r.R})),c.React.createElement("dd",null,c.React.createElement("label",null,"G："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"G"),value:r.G})),c.React.createElement("dd",null,c.React.createElement("label",null,"B："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"B"),value:r.B})),c.React.createElement("dd",{className:"color"},c.React.createElement("label",null,"#"),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"color"),value:r.color}))),c.React.createElement("button",{onClick:function(e){return t(r,e)},className:"nj-button nj-button-red nj-button-small ok"},"确定"),c.React.createElement("button",{onClick:function(e){return a(r,e)},className:"nj-button nj-button-small close"},"取消")))}}]),t}(c.React.Component);t.default=h},299:function(e,t,a){t=e.exports=a(47)(void 0),t.push([e.i,"#nj_color{position:absolute;background:#f5f5f5;padding:15px;border:1px solid;width:380px;border-color:#e4e4e4 #ccc #ccc #e4e4e4;display:none;z-index:999}#nj_color .mask{border:1px solid;border-color:#bbb #fff #fff #bbb;width:255px;height:255px;position:relative;float:left;background:red}#nj_color .mask .b{position:absolute;top:0;left:0;width:100%;height:100%;background:url("+a(293)+")}#nj_color .mask .c{position:absolute;top:-6px;left:-6px;width:12px;height:12px;background:url("+a(292)+")}#nj_color .roll{width:20px;height:255px;margin:0 12px;float:left;position:relative;background:url("+a(294)+")}#nj_color .roll .c{width:32px;height:9px;background:url("+a(295)+");position:absolute;top:-3px;left:-5px}#nj_color .r{float:right}#nj_color .preview{text-align:center;display:inline-block}#nj_color .preview i{display:block;width:70px;height:40px;border:1px solid;border-color:#bbb #fff #fff #bbb;background:#fff}#nj_color .r dl{margin:5px 0 0}#nj_color .r dd label{display:inline-block;width:21px}#nj_color .r dd input{width:25px;padding:1px 3px;line-height:15px;border-radius:3px;border:1px solid;border-color:#ccc #eee #eee #ccc;margin:0 5px 0 0}#nj_color .r dd{padding:1px 0 2px}#nj_color .r .color{padding:6px 0}#nj_color .r .color label{width:auto}#nj_color .r .color input{width:50px}.color-picker{display:inline-block;border:1px solid #bbb;border-radius:2px;background:#fff;width:12px;height:12px;vertical-align:middle;position:relative}.color-picker .transparent{border-top:1px solid #eb5648;transform:translateY(-50%) rotate(45deg);transform-origin:0 0;width:150%;position:absolute;top:0;left:0}.color-picker .inner{display:inline-block;width:10px;height:10px;vertical-align:top;margin:1px}.color-picker-box{background:#f5f5f5;padding:15px;border:1px solid;width:400px;border-color:#e4e4e4 #ccc #ccc #e4e4e4}.color-picker-box .mask{border:1px solid;border-color:#bbb #fff #fff #bbb;width:255px;height:255px;position:relative;float:left}.color-picker-box .mask .b{position:absolute;top:0;left:0;width:100%;height:100%;background:url("+a(293)+")}.color-picker-box .mask .c{position:absolute;top:-6px;left:-6px;width:12px;height:12px;background:url("+a(292)+")}.color-picker-box .roll{width:20px;height:255px;margin:0 12px;float:left;position:relative;background:url("+a(294)+")}.color-picker-box .roll .c{width:32px;height:9px;background:url("+a(295)+");position:absolute;top:-3px;left:-5px}.color-picker-box .r{float:right}.color-picker-box .preview{text-align:center;display:inline-block}.color-picker-box .preview i{display:block;width:70px;height:40px;border:1px solid;border-color:#bbb #fff #fff #bbb;background:#fff}.color-picker-box .r dl{margin:5px 0 0}.color-picker-box .r dd label{display:inline-block;width:21px}.color-picker-box .r dd input{width:25px;padding:1px 3px;line-height:15px;border-radius:3px;border:1px solid;border-color:#ccc #eee #eee #ccc;margin:0 5px 0 0}.color-picker-box .r dd{padding:1px 0 2px}.color-picker-box .r .color{padding:6px 0}.color-picker-box .r .color label{width:auto}.color-picker-box .r .color input{width:50px}",""])},300:function(e,t,a){var o=a(299);"string"==typeof o&&(o=[[e.i,o,""]]);a(48)(o,{insertAt:"top"});o.locals&&(e.exports=o.locals)},74:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),c=a(5),u=(o(c),a(17)),p=(a(46),a(297)),h=o(p),f=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return l(t,e),s(t,[{key:"changeHandle",value:function(e,t,a){var o=this.props.data,r=n({},e,t);o=Object.assign({},o),a?Object.assign(o[a],r):Object.assign(o,r),this.props.onChange(o)}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.x,o=t.y,n=t.style,r=n.width,i=n.height,l=n.color,s=n.fontSize;return u.React.createElement("div",{className:"props-panel"},u.React.createElement("h6",null,"属性："),u.React.createElement("ul",{className:"nj-form"},u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"x:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:a,onChange:function(t){return e.changeHandle("x",parseInt(t.target.value))},className:"text"}),"px")),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"y:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:o,onChange:function(t){return e.changeHandle("y",parseInt(t.target.value))},className:"text"}),"px")),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"宽度:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:r,onChange:function(t){return e.changeHandle("width",parseInt(t.target.value),"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"高度:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:i,onChange:function(t){return e.changeHandle("height",parseInt(t.target.value),"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"颜色:"),u.React.createElement("div",{className:"fields"},u.React.createElement(h.default,{color:l,onChange:function(t){return e.changeHandle("color","#"+t.color,"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"字号:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:s,onChange:function(t){return e.changeHandle("fontSize",parseInt(t.target.value),"style")},className:"text"})))))}}]),t}(u.React.Component);t.default=f},75:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){e.innerText;if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var a=window.getSelection(),t=document.createRange();t.selectNodeContents(e),a.removeAllRanges(),a.addRange(t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBannerOptions=void 0;var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),c=a(5),u=o(c),p=a(17),h=a(296),f=o(h),d=a(173),m=o(d),b=a(74),g=o(b),v=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=a.props.layers,i=void 0===o?[]:o;return a.state={layers:i},a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.root;t.canvas.el.click(function(t){(0,u.default)(t.target).closest(".layer").length||e.setState({focus:null})}),(0,u.default)(document).keydown(function(t){var a=t.keyCode,o=e.state,n=o.layers,r=o.focus;if(46==a&&r){var i=n.indexOf(r);n.splice(i,1),console.log(a,i),e.setState({layers:n,focus:null})}}),this.propsPanel=m.default.create({trigger:"click",effect:"normal",delegate:["div.layer",t.canvas.areas],position:{left:80,top:"-100"}}).onShow(function(){e.state.focus;(0,p.render)(p.React.createElement(g.default,{data:e.state.focus,onChange:function(t){Object.assign(e.state.focus,t),e.forceUpdate()}}),e.propsPanel.wrap.childNodes[0])})}},{key:"getKey",value:function(){return+new Date+"_"+parseInt(1e5*Math.random())}},{key:"push",value:function(e){var t=this,a=this.state.layers;e.key=this.getKey(),a.push(e),this.setState({layers:a,focus:e},function(){return t.refs.focus.click()})}},{key:"setFocus",value:function(e,t){this.setState({focus:e})}},{key:"componentDidUpdate",value:function(e,t){var a=this.refs.editor;a&&t.editor!=this.state.editor&&(a.focus(),l(a))}},{key:"componentDidUpdate",value:function(e,t){!this.state.focus&&this.propsPanel.setDisplay(!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.layers,o=t.focus,n=t.editor,r=this.props.root;return p.React.createElement("div",null,a.map(function(t){return p.React.createElement(x,{key:t.key,limit:r.canvas.el,onDragDown:e.setFocus.bind(e,t),MoveEvent:function(e){t.x=e.left,t.y=e.top}},p.React.createElement("div",{onDoubleClick:function(a){return e.setState({editor:t})},className:"layer"+(o===t?" drag-focus":""),style:Object.assign({top:t.y,left:t.x},t.style),ref:o==t?"focus":"layer"},p.React.createElement("div",{className:"inner",dangerouslySetInnerHTML:{__html:t.html}})))}),n?p.React.createElement("div",{className:"layer-mask",style:Object.assign({top:n.y,left:n.x},n.style)},p.React.createElement("div",{className:"inner",contentEditable:"true",ref:"editor",onBlur:function(){var t=(0,u.default)(e.refs.editor),a=t.height();n.style.height=a;var o=a/2-t.parent().height()/2;n.y+=o,e.setState({editor:null})},onKeyUp:function(e){n.html=e.target.innerHTML},dangerouslySetInnerHTML:{__html:n.html}})):null)}}]),t}(p.React.Component);t.default=v;var x=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=(0,u.default)(p.ReactDOM.findDOMNode(this)),t=Object.assign({},this.props);this.drag=new f.default(e,e.children(),t)}},{key:"getSize",value:function(){var e=(0,u.default)(p.ReactDOM.findDOMNode(this)),t=e.width(),a=e.height();return{x:-t/2,y:-a/2,width:t/2,height:a/2}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return this.props.children}}]),t}(p.React.Component);t.getBannerOptions=function(e){var t=void 0,a=void 0,o=void 0,n=void 0,r=e.props.root;return{onDragDown:function(i){var l=r.canvas,s=l.el,c=l.areas,h=s.offset(),f=h.top,d=h.left;a=f,o=d,t=c.filter('[data-dragarea="'+i.target+'"]'),n=(0,u.default)(p.ReactDOM.findDOMNode(e)).offset().left},onDragMove:function(e,a){var i=r.canvas,l=i.el,s=i.areas;r.canvas.target=null,s.removeClass("drag-active");var c=t.offset().top,u=t.outerHeight(),p=o,h=l.outerWidth();e>p&&e<p+h&&a>c&&a<c+u&&e<n&&(r.canvas.target=t.addClass("drag-active"))},onDragUp:function(e,t,n){var i=r.canvas,l=(i.el,i.target);if(i.areas.removeClass("drag-active"),l){var s=t-a,c=e-o,u=n.module.style,p=Object.assign({x:c-u.width/2,y:s-u.height/2},n.module);r.state.data[n.target].layers.push(p)}r.canvas.target=null}}}}});