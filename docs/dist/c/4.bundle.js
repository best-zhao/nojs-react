webpackJsonp([4],{291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.HsbToRgb=function(e,t,a){var n={R:0,G:0,B:0};if(e=e>=360?0:e,t/=100,a/=100,0==t)n.R=255*a,n.G=255*a,n.B=255*a;else{var o=Math.floor(e/60)%6,r=e/60-o,l=a*(1-t),c=a*(1-t*r),i=a*(1-t*(1-r));switch(o){case 0:n.R=a,n.G=i,n.B=l;break;case 1:n.R=c,n.G=a,n.B=l;break;case 2:n.R=l,n.G=a,n.B=i;break;case 3:n.R=l,n.G=c,n.B=a;break;case 4:n.R=i,n.G=l,n.B=a;break;case 5:n.R=a,n.G=l,n.B=c}n.R=255*n.R,n.G=255*n.G,n.B=255*n.B}return n},t.RgbToHsb=function(e,t,a){var n,o,r,l=Math.min(Math.min(e,t),a),c=Math.max(Math.max(e,t),a),i={H:0,S:0,B:0};return l==c?i.H=0:c==e&&t>=a?i.H=(t-a)/(c-l)*60:c==e&&t<a?i.H=(t-a)/(c-l)*60+360:c==t?i.H=(a-e)/(c-l)*60+120:c==a&&(i.H=(e-t)/(c-l)*60+240),i.S=0==c?0:1-l/c,n=e/255,o=t/255,r=a/255,i.B=Math.max(Math.max(n,o),r),i.H=i.H>=360?0:i.H,i.S=100*i.S,i.B=100*i.B,i},t.RgbToHex=function(e,t,a,n){for(var o,r="",l=[Math.round(e),Math.round(t),Math.round(a)],c=0;c<l.length;c++)o=Number(l[c]).toString(16),1==o.length&&(o="0"+o),r+=o;return n&&(r="#"+r),r},t.HexToRgb=function(e){var t=n(e);if(!t)return e;for(var a=[],o=0;o<5;o+=2)a.push(parseInt("0x"+t.slice(o,o+2)));return{R:a[0],G:a[1],B:a[2]}},t.dealColor=function(e){e=String(e).toLowerCase().replace(/#/,"");var t=/^([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(3==e.length){for(var a="",n=0;n<3;n++)a+=e.slice(n,n+1)+e.slice(n,n+1);e=a}return e}})},292:function(e,t,a){e.exports=a.p+"img/lib/e1afc72d.choose.png"},293:function(e,t,a){e.exports=a.p+"img/lib/f9aeabdb.masks.png"},294:function(e,t,a){e.exports=a.p+"img/lib/3915f498.rolling.png"},295:function(e,t,a){e.exports=a.p+"img/lib/c7946f7d.rolling_B.png"},297:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(5),s=n(i),u=a(20),p=a(173),d=n(p),f=a(298),b=n(f),h=a(291);a(300);var m=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=Object.assign({},a.props);return n.color=(0,h.dealColor)(n.color),a.state={data:n},a}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=(t.visible,t.children,t.onChange),n=t.onSubmit;this.pop=d.default.create({trigger:"click",effect:"normal",nearby:(0,s.default)(u.ReactDOM.findDOMNode(this))}).onShow(function(){var t=u.React.createElement(b.default,{data:e.state.data,onChange:function(t){e.setState({data:t}),a&&a(t)},onSubmit:function(t){e.setState({data:t}),e.pop.setDisplay(!1),n&&n(t)},onCancel:function(t){return e.pop.setDisplay(!1)}});e.pop.setState({template:t})}).onHide(function(){e.pop.setState({template:null})})}},{key:"render",value:function(){var e=this.props.children,t=this.state.data;return e||u.React.createElement("span",{className:"color-picker"},u.React.createElement("span",{className:t.color?"inner":"transparent",style:{backgroundColor:"#"+t.color}}))}}]),t}(u.React.Component);t.default=m},298:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(5),i=function(e){return e&&e.__esModule?e:{default:e}}(c),s=a(20),u=a(291),p=(0,i.default)(document),d=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=a.props.data;a.state={hue:"rgb(255, 0, 0)",pos:{},data:Object.assign({h:0,s:0,b:100,R:255,G:255,B:255,color:"ffffff"},r)};var l="hsb";return r.color?l="color":r.R&&(l="rgb"),a.update(l,!0),a}return r(t,e),l(t,[{key:"startChoose",value:function(e,t){var a=this;this.moveHandle(e,t),p.on("mousemove.color",function(t){a.moveHandle(e,t)}).on("mouseup.color",function(e){p.off("mousemove.color mouseup.color")})}},{key:"moveHandle",value:function(e,t){var a=this.state.data,n=(0,i.default)(this.refs[e]),o="mask"==e,r={x:t.clientX,y:t.clientY},l=r.y+(0,i.default)(window).scrollTop()-n.offset().top;if(l=l<0?0:l,l=l>255?255:l,o){a.b=100-100*l/255;var c=r.x+(0,i.default)(window).scrollLeft()-n.offset().left;c=c<0?0:c,c=c>255?255:c,a.s=100*c/255}else{a.h=360-360*l/255;var s=this.state.maxHue=a.h>=360;a.h=s?0:a.h}t.preventDefault(),this.update("hsb")}},{key:"update",value:function(e,t){var a=this.props.onChange,n=this.state,o=n.data,r=(n.pos,o),l=r.h,c=r.s,i=r.b,s=r.R,p=r.G,d=r.B,f=r.color;if("hsb"==e){var b=(0,u.HsbToRgb)(l,c,i);s=b.R,p=b.G,d=b.B}else if("rgb"==e)var h=(0,u.RgbToHsb)(s,p,d),l=h.H,c=h.S,i=h.B;else{var m=(0,u.HexToRgb)(f);if("string"==typeof m||f.length<6)return void this.setState({data:o});var s=m.R,p=m.G,d=m.B,g=(0,u.RgbToHsb)(s,p,d),l=g.H,c=g.S,i=g.B}o={h:Math.round(l),s:Math.round(c),b:Math.round(i),color:(0,u.RgbToHex)(s,p,d).toUpperCase(),R:Math.round(s),G:Math.round(p),B:Math.round(d)};var x=(0,u.HsbToRgb)(l,100,100);this.state.hue="rgb("+Math.round(x.R)+", "+Math.round(x.G)+", "+Math.round(x.B)+")",t&&(this.state.maxHue=!l),this.getPos(o),t?this.state.data=o:(a&&a(o),this.setState({data:o}))}},{key:"getPos",value:function(e){var t=this.state,a=t.maxHue,n=t.pos,o=e.h,r=e.s,l=e.b;n.roll_top=a?-3:(360-o)/360*255-3,n.left=255*r/100-6,n.top=255*(100-l)/100-6}},{key:"changeHandle",value:function(e,t){var a=this.state.data,n=t.target.value;if(this.state.maxHue=!1,"color"==e)return a[e]=n,void this.update(e);n=parseInt(n),n=isNaN(n)?a[e]:n,e.toLowerCase()!=e?(n=n<0||n>255?a[e]:n,a[e]=n,this.update("rgb")):(n="h"==e?n<0||n>359?a[e]:n:n<0||n>100?a[e]:n,a[e]=n,this.update("hsb"))}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,a=e.onCancel,n=this.state,o=n.hue,r=n.data,l=n.pos;return s.React.createElement("div",{className:"color-picker-box clearfix"},s.React.createElement("div",{className:"mask",ref:"mask",style:{background:o},onMouseDown:this.startChoose.bind(this,"mask")},s.React.createElement("div",{className:"b"}),s.React.createElement("div",{className:"c",style:{top:l.top,left:l.left}})),s.React.createElement("div",{className:"roll",ref:"roll",onMouseDown:this.startChoose.bind(this,"roll")},s.React.createElement("div",{className:"c",style:{top:l.roll_top}})),s.React.createElement("div",{className:"r"},s.React.createElement("span",{className:"preview"},s.React.createElement("i",{style:{background:"#"+r.color}}),"颜色"),s.React.createElement("dl",null,s.React.createElement("dd",null,s.React.createElement("label",null,"H："),s.React.createElement("input",{onChange:this.changeHandle.bind(this,"h"),value:r.h}),"度"),s.React.createElement("dd",null,s.React.createElement("label",null,"S："),s.React.createElement("input",{onChange:this.changeHandle.bind(this,"s"),value:r.s}),"%"),s.React.createElement("dd",null,s.React.createElement("label",null,"B："),s.React.createElement("input",{onChange:this.changeHandle.bind(this,"b"),value:r.b}),"%")),s.React.createElement("dl",null,s.React.createElement("dd",null,s.React.createElement("label",null,"R："),s.React.createElement("input",{onChange:this.changeHandle.bind(this,"R"),value:r.R})),s.React.createElement("dd",null,s.React.createElement("label",null,"G："),s.React.createElement("input",{onChange:this.changeHandle.bind(this,"G"),value:r.G})),s.React.createElement("dd",null,s.React.createElement("label",null,"B："),s.React.createElement("input",{onChange:this.changeHandle.bind(this,"B"),value:r.B})),s.React.createElement("dd",{className:"color"},s.React.createElement("label",null,"#"),s.React.createElement("input",{onChange:this.changeHandle.bind(this,"color"),value:r.color}))),s.React.createElement("button",{onClick:function(e){return t(r,e)},className:"nj-button nj-button-red nj-button-small ok"},"确定"),s.React.createElement("button",{onClick:function(e){return a(r,e)},className:"nj-button nj-button-small close"},"取消")))}}]),t}(s.React.Component);t.default=d},299:function(e,t,a){t=e.exports=a(47)(void 0),t.push([e.i,"#nj_color{position:absolute;background:#f5f5f5;padding:15px;border:1px solid;width:380px;border-color:#e4e4e4 #ccc #ccc #e4e4e4;display:none;z-index:999}#nj_color .mask{border:1px solid;border-color:#bbb #fff #fff #bbb;width:255px;height:255px;position:relative;float:left;background:red}#nj_color .mask .b{position:absolute;top:0;left:0;width:100%;height:100%;background:url("+a(293)+")}#nj_color .mask .c{position:absolute;top:-6px;left:-6px;width:12px;height:12px;background:url("+a(292)+")}#nj_color .roll{width:20px;height:255px;margin:0 12px;float:left;position:relative;background:url("+a(294)+")}#nj_color .roll .c{width:32px;height:9px;background:url("+a(295)+");position:absolute;top:-3px;left:-5px}#nj_color .r{float:right}#nj_color .preview{text-align:center;display:inline-block}#nj_color .preview i{display:block;width:70px;height:40px;border:1px solid;border-color:#bbb #fff #fff #bbb;background:#fff}#nj_color .r dl{margin:5px 0 0}#nj_color .r dd label{display:inline-block;width:21px}#nj_color .r dd input{width:25px;padding:1px 3px;line-height:15px;border-radius:3px;border:1px solid;border-color:#ccc #eee #eee #ccc;margin:0 5px 0 0}#nj_color .r dd{padding:1px 0 2px}#nj_color .r .color{padding:6px 0}#nj_color .r .color label{width:auto}#nj_color .r .color input{width:50px}.color-picker{display:inline-block;border:1px solid #bbb;border-radius:2px;background:#fff;width:12px;height:12px;vertical-align:middle;position:relative}.color-picker .transparent{border-top:1px solid #eb5648;transform:translateY(-50%) rotate(45deg);transform-origin:0 0;width:150%;position:absolute;top:0;left:0}.color-picker .inner{display:inline-block;width:10px;height:10px;vertical-align:top;margin:1px}.color-picker-box{background:#f5f5f5;padding:15px;border:1px solid;width:400px;border-color:#e4e4e4 #ccc #ccc #e4e4e4}.color-picker-box .mask{border:1px solid;border-color:#bbb #fff #fff #bbb;width:255px;height:255px;position:relative;float:left}.color-picker-box .mask .b{position:absolute;top:0;left:0;width:100%;height:100%;background:url("+a(293)+")}.color-picker-box .mask .c{position:absolute;top:-6px;left:-6px;width:12px;height:12px;background:url("+a(292)+")}.color-picker-box .roll{width:20px;height:255px;margin:0 12px;float:left;position:relative;background:url("+a(294)+")}.color-picker-box .roll .c{width:32px;height:9px;background:url("+a(295)+");position:absolute;top:-3px;left:-5px}.color-picker-box .r{float:right}.color-picker-box .preview{text-align:center;display:inline-block}.color-picker-box .preview i{display:block;width:70px;height:40px;border:1px solid;border-color:#bbb #fff #fff #bbb;background:#fff}.color-picker-box .r dl{margin:5px 0 0}.color-picker-box .r dd label{display:inline-block;width:21px}.color-picker-box .r dd input{width:25px;padding:1px 3px;line-height:15px;border-radius:3px;border:1px solid;border-color:#ccc #eee #eee #ccc;margin:0 5px 0 0}.color-picker-box .r dd{padding:1px 0 2px}.color-picker-box .r .color{padding:6px 0}.color-picker-box .r .color label{width:auto}.color-picker-box .r .color input{width:50px}",""])},300:function(e,t,a){var n=a(299);"string"==typeof n&&(n=[[e.i,n,""]]);a(48)(n,{insertAt:"top"});n.locals&&(e.exports=n.locals)},74:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(5),u=(n(s),a(17)),p=(a(46),a(297)),d=n(p),f=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return c(t,e),i(t,[{key:"changeHandle",value:function(e,t,a){var n=this.props.data,r=o({},e,t);n=Object.assign({},n),a?Object.assign(n[a],r):Object.assign(n,r),this.props.onChange(n)}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.x,n=t.y,o=t.style,r=o.width,l=o.height,c=o.color,i=o.fontSize;return u.React.createElement("div",{className:"props-panel"},u.React.createElement("h6",null,"属性："),u.React.createElement("ul",{className:"nj-form"},u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"x:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:a,onChange:function(t){return e.changeHandle("x",parseInt(t.target.value))},className:"text"}),"px")),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"y:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:n,onChange:function(t){return e.changeHandle("y",parseInt(t.target.value))},className:"text"}),"px")),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"宽度:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:r,onChange:function(t){return e.changeHandle("width",parseInt(t.target.value),"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"高度:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:l,onChange:function(t){return e.changeHandle("height",parseInt(t.target.value),"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"颜色:"),u.React.createElement("div",{className:"fields"},u.React.createElement(d.default,{color:c,onChange:function(t){return e.changeHandle("color","#"+t.color,"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"字号:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:i,onChange:function(t){return e.changeHandle("fontSize",parseInt(t.target.value),"style")},className:"text"})))))}}]),t}(u.React.Component);t.default=f}});