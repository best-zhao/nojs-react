webpackJsonp([7],{180:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(5),s=r(c),f=n(17),p=(r(f),n(182)),d=r(p),m=n(183),h=r(m),y=n(49),v=r(y),b=f.utils.localStorage,g=f.utils.joinClass,_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={menuVisible:n.setVisible(),topbarItems:[{content:f.React.createElement("i",{className:"nj-icon nj-icon-menu"}),type:"button",handle:n.toggleMenu.bind(n),align:"left"},{content:f.React.createElement("i",{className:"nj-icon nj-icon-back"}),type:"button",handle:function(e){return n.context.router.goBack()},align:"left"}]},n}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=u(this.props.routes,1),n=t[0].props,r=n.menu;n.root.tree=this.refs.menu.refs.tree,(0,s.default)(document).delegate("div.grid-main a, div.grid-topbar a","click",function(t){if(!this.target&&!t.isDefaultPrevented()){t.preventDefault();var n=this.getAttribute("href");if(!n)return;var o=e.props.params,i=o.id,a=(o.url,r.filter(function(e){return e.link==n&&e.id!=i})[0]);a?e.context.router.push("/id/"+a.id):e.context.router.push("/id/"+i+"/url/"+encodeURIComponent(n))}})}},{key:"toggleMenu",value:function(e){this.setState({menuVisible:this.setVisible(!0)}),e.preventDefault()}},{key:"setVisible",value:function(e){var t=b.get("menu_visible")||!0;return t=t?JSON.parse(t):t,t=e?!t:t,b.set("menu_visible",t),t}},{key:"render",value:function(){var e=u(this.props.routes,1),t=e[0].props,n=t.menu,r=t.sidebar,o=t.showTopbar,i=void 0===o||o,a=t.topbarItems,l=void 0===a?[]:a,c=t.style,s=t.root,p=t.parentSelect,m=this.state.menuVisible,y=this.props,v=y.children,b=y.params,_=v&&f.React.cloneElement(v,{parent:this,root:s}),j=g("app-container",!m&&"hide-menu",i&&"show-topbar",c&&"app-style"+c);return f.React.createElement("div",{className:j},f.React.createElement(d.default,{defaultNode:b.id,menu:n,sidebar:r,ref:"menu",parentSelect:p}),i?f.React.createElement(h.default,{items:this.state.topbarItems.concat(l)}):null,_)}}]),t}(f.React.Component);_.contextTypes={router:v.default.object},e.exports=_},181:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=(n(38),n(5)),p=r(f),d=(n(46),n(49)),m=r(d),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return a(t,e),l(t,null,[{key:"onLeave",value:function(e){t.leaveEvent&&t.leaveEvent(e)}}]),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params,n=u(e.routes,1),r=n[0].props,o=e.root,i=r.onReady;this.jump(null,function(){i&&i(t)}),o.reload=this.jump.bind(this),this.context.router.setRouteLeaveHook(this.props.route,this.routerWillLeave)}},{key:"routerWillLeave",value:function(e){}},{key:"jump",value:function(e,t){var n=e||this.props,r=u(n.routes,1),o=r[0].props,i=n.params,a=o.menu,l=i.id,c=(i.url,a.filter(function(e){return e.id==l})[0]);this.load(i,c,t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.params,r=u(t.routes,1),o=r[0].props,i=e.params,a=o.onChange,l=o.onChangeBefore;l&&l(i,n),(i.id!=n.id||i.url!=n.url)&&this.jump(e),a&&a(i,n)}},{key:"load",value:function(e,t,n){var r=this,o=u(this.props.routes,1),i=o[0].props,a=i.template,l=i.htmlParse,c=i.onComplete,s=(i.loadScript,i.scripts),f=void 0===s?{}:s,d=e.url,m=e.id;d=d||t&&t.link;var h=d;d&&"function"==typeof a&&(h=a({id:m,url:d})),h&&(this.setState({status:"pending"}),p.default.get(h).then(function(t){var o=(0,p.default)(r.refs.wrap);o.scrollTop(0),"function"==typeof l&&(t=l(t,{id:m,url:d}));for(var a=Math.ceil(10*Math.random()),u=0;u<a;u++)t+="&nbsp;";r.setState({html:t,status:"complete"},function(t){var a=r.props.parent,u=i.menu.filter(function(e){return e.id==m})[0],l=o.find("#__pageName__").val(),s=f[l]||f[d]||f[m];!f[d]&&f[m]&&d!=u.link&&(s=null),c&&c(e,u,s,a),n&&n(e,u)})}).fail(function(e){r.setState({status:"fail"})}))}},{key:"render",value:function(){var e=u(this.props.routes,1),t=e[0].props,n=t.pending,r=void 0===n?s.default.createElement("div",{className:"page-pending"},s.default.createElement("i",{className:"nj-icon nj-icon-loading"})):n,o=this.state,i=o.html,a=void 0===i?"":i,l=o.status;return s.default.createElement("div",{className:"grid-main",ref:"wrap"},"pending"==l?r:null,s.default.createElement("div",{className:"grid-inner",dangerouslySetInnerHTML:{__html:a}}))}}]),t}(s.default.Component);h.contextTypes={router:m.default.object},e.exports=h},182:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(50),f=n(5),p=(r(f),n(79)),d=r(p),m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"changeHandle",value:function(e,t){e.link||t.preventDefault()}},{key:"componentDidMount",value:function(){var e=this.refs.tree,t=this.props,n=t.onReady,r=t.parentSelect;n&&n(e.state.dataFormat.databyid),r||e.onChange(function(t,n){t.children.length&&(n.preventDefault(),e.toggle(t))})}},{key:"componentWillReceiveProps",value:function(e){var t=this.refs.tree,n=e.defaultNode;(n=t.state.dataFormat.databyid[n])&&t.select(n)}},{key:"render",value:function(){var e=this.props,t=e.defaultNode,n=e.menu,r=e.sidebar,o=e.parentSelect,i=c.default.createElement("div",{className:"nj-tree"},c.default.createElement(d.default,{ref:"tree",data:n,onChange:this.changeHandle.bind(this),defaultNode:t,defineName:function(e){var t=e.link;return e.children.length&&!o&&(t=!1),c.default.createElement("span",null,t?c.default.createElement(s.Link,{to:"/id/"+e.id}):null," ",e.name)}}));return"function"==typeof r&&(i=r(i)),c.default.createElement("div",{className:"grid-menu"},c.default.createElement("div",{className:"grid-inner"},i))}}]),t}(c.default.Component);e.exports=m},183:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(17),c=(function(e){e&&e.__esModule}(l),l.utils.joinClass),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props.items;t.forEach(function(e){e.index=e.index||0}),t.sort(function(e,t){return e.index>t.index});var n=t.filter(function(e){return"left"==e.align}),r=t.filter(function(e){return"right"==e.align||!e.align}),o=function(t,n){var r=t.content,o=t.type,i=t.handle,u={key:n,className:c("item",o&&"item-"+o),onClick:i};return"string"==typeof r?l.React.createElement("div",a({},u,{dangerouslySetInnerHTML:{__html:r}})):"function"==typeof r?r(u,e)||null:l.React.createElement("div",u,r)};return l.React.createElement("div",{className:"grid-topbar"},l.React.createElement("div",{className:"_inner clearfix"},l.React.createElement("div",{className:"fl l"},n.map(o)),l.React.createElement("div",{className:"fr r"},r.map(o))))}}]),t}(l.React.Component);e.exports=s},184:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=(n(38),n(50)),f=n(180),p=r(f),d=n(181),m=r(d);n(84);var h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.options={}}},{key:"go",value:function(e,t){var n=this.props.menu,r=this.refs.routers,o=r.state,i=r.router;if(e.url&&!e.id){var a=n.filter(function(t){return t.link==e.url});a=a.length>1?a.filter(function(e){return e.id==o.params.id})[0]||a[0]:a[0],a&&(e.url=null,e.id=a.id)}this.options=t||{};var u=this.constructor.parse(e,o.params);i.push(u)}},{key:"render",value:function(){var e=this.props,t=this.constructor.config_route,n=void 0===t?"":t;return c.default.createElement(s.Router,{history:s.hashHistory,ref:"routers"},c.default.createElement(s.Route,{path:"/",component:p.default,props:Object.assign({root:this},e)},e.defaultNode?c.default.createElement(s.IndexRedirect,{to:"/id/"+e.defaultNode}):null,c.default.createElement(s.Route,{path:"/id/:id(/url/:url)"+n,component:m.default,onLeave:m.default.onLeave})))}}],[{key:"config",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.route;this.config_routeKeys=t,this.config_route=Array.isArray(t)&&t.map(function(e){return"(/"+e+"/:"+e+")"}).join("")}},{key:"parse",value:function(e,t){var n=["id","url"].concat(this.config_routeKeys),r=Object.keys(e);return n.map(function(n){if(!(null==e[n]&&r.indexOf(n)>=0)){var o=e[n]||t[n];return o&&"/"+n+"/"+encodeURIComponent(o)}}).filter(function(e){return!!e}).join("")}}]),t}(c.default.Component);e.exports=h},41:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(5),i=r(o),a=n(17),u=(r(a),n(184)),l=r(u),c=n(46),s=n(83),f=r(s),p=n(82),d=r(p),m=n(27),h=r(m);l.default.config({route:["a","b"]});var y={defaultNode:"0",menu:d.default.data,_sidebar:function(e){return a.React.createElement("div",null,a.React.createElement("h3",{style:{padding:"1.5em 1em",fontWeight:"100",margin:0}},"nojs-react"),e)},topbarItems:[{content:'<a href="form/normal.html">aaa21312</a>',type:"link"},{content:function(e){var t=(0,i.default)("div.grid-main").find("form").length,n=c.Form.getByHandle("verify");return t&&a.React.createElement("div",e,a.React.createElement("button",{className:"nj-button nj-button-small",onClick:function(e){return n.submit()}},"done"))}}],template:function(e){var t=(e.id,e.url);return"html/"+t+(t.indexOf(".")<0?".md":"")},htmlParse:function(e,t){t.id;return t.url.indexOf(".")<0?(0,f.default)(e):e},onComplete:function(e,t,r,o){h.default.highlightAll(),r&&n(81)("./"+r).then(function(n){n.init&&n.init(e,t)})},onReady:function(e){},onChange:function(e,t){},scripts:{index:"demo/index",mask:"demo/mask",popup:"demo/popup",popover:"demo/popup",datepicker:"demo/datepicker",editor:"demo/editor",colorpicker:"demo/colorpicker","form/normal.html":"demo/form","form/component.html":"demo/form","form/input-group.html":"demo/form","tree/linkTree":"demo/tree","app/page":"page/index"}},v=window.rootFrame=(0,a.render)(a.React.createElement(l.default,y),document.getElementById("root"));v.tree.onChange(function(e,t){e.children.length&&(t.preventDefault(),v.tree.toggle(e))})}});