webpackJsonp([2,3,4,12,13],{174:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(5),i=(a(r),n(24)),s=a(i),l=n(77),c=a(l),u=i.React.createClass({displayName:"Switch",mixins:[i.mixins.childComponents.config],getInitialState:function(){return{index:0,trigger:this.props.trigger||"click"}},componentDidMount:function(){var e=this;f.getChildComponents(this);var t=this.props.interval;t&&window.setInterval(function(){e.change(++e.state.index)},t),this.changeEvent=s.default.utils.addEventQueue.call(this,"onChange"),this.readyEvent=s.default.utils.addEventQueue.call(this,"onReady"),setTimeout(function(t){return e.readyEvent.complete()},1)},change:function(e,t){var n=this.state.length;e=e<0?n-1:e,e=e>=n?0:e,this.state.index=e,this.setState({index:e}),this.state.childComponents.forEach(function(e){e.forceUpdate()}),this.changeEvent.complete(e,t)},render:function(){var e=s.default.utils.joinClass("nj-switch",this.props.className);return i.React.createElement("div",o({},this.props,{className:e}),this.props.children)}}),d=i.React.createClass({displayName:"SwitchMenu",mixins:[i.mixins.childComponents.setParents([u],1)],componentDidMount:function(){f.getChildComponents(this)},render:function(){var e=this.state.parentComponent,t=e.state.index,n=s.default.utils.joinClass("nj-switch-menu",t==this.state.index&&"nj-switch-menu-active"),a={className:n};return a["hover"==e.state.trigger?"onMouseEnter":"onClick"]=e.change.bind(e,this.state.index),a=Object.assign({},this.props,a),i.React.createElement("div",a,this.props.children)}}),p=i.React.createClass({displayName:"SwitchItem",mixins:[i.mixins.childComponents.setParents([u],1)],componentDidMount:function(){f.getChildComponents(this),this.state.parentComponent.state.length=this.state.index+1},render:function(){var e=this.state.parentComponent.state.index,t=s.default.utils.joinClass("nj-switch-item",e==this.state.index?"nj-switch-item-active":"d_hide");return i.React.createElement("div",o({},this.props,{className:t}),this.props.children)}}),f=new c.default({elementGroups:{switch:{children:["switch-menu","switch-item"],component:u},"switch-menu":{component:d},"switch-item":{component:p}},exports:t})},291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(t.HsbToRgb=function(e,t,n){var a={R:0,G:0,B:0};if(e=e>=360?0:e,t/=100,n/=100,0==t)a.R=255*n,a.G=255*n,a.B=255*n;else{var o=Math.floor(e/60)%6,r=e/60-o,i=n*(1-t),s=n*(1-t*r),l=n*(1-t*(1-r));switch(o){case 0:a.R=n,a.G=l,a.B=i;break;case 1:a.R=s,a.G=n,a.B=i;break;case 2:a.R=i,a.G=n,a.B=l;break;case 3:a.R=i,a.G=s,a.B=n;break;case 4:a.R=l,a.G=i,a.B=n;break;case 5:a.R=n,a.G=i,a.B=s}a.R=255*a.R,a.G=255*a.G,a.B=255*a.B}return a},t.RgbToHsb=function(e,t,n){var a,o,r,i=Math.min(Math.min(e,t),n),s=Math.max(Math.max(e,t),n),l={H:0,S:0,B:0};return i==s?l.H=0:s==e&&t>=n?l.H=(t-n)/(s-i)*60:s==e&&t<n?l.H=(t-n)/(s-i)*60+360:s==t?l.H=(n-e)/(s-i)*60+120:s==n&&(l.H=(e-t)/(s-i)*60+240),l.S=0==s?0:1-i/s,a=e/255,o=t/255,r=n/255,l.B=Math.max(Math.max(a,o),r),l.H=l.H>=360?0:l.H,l.S=100*l.S,l.B=100*l.B,l},t.RgbToHex=function(e,t,n,a){for(var o,r="",i=[Math.round(e),Math.round(t),Math.round(n)],s=0;s<i.length;s++)o=Number(i[s]).toString(16),1==o.length&&(o="0"+o),r+=o;return a&&(r="#"+r),r},t.HexToRgb=function(e){var t=a(e);if(!t)return e;for(var n=[],o=0;o<5;o+=2)n.push(parseInt("0x"+t.slice(o,o+2)));return{R:n[0],G:n[1],B:n[2]}},t.dealColor=function(e){e=String(e).toLowerCase().replace(/#/,"");var t=/^([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(3==e.length){for(var n="",a=0;a<3;a++)n+=e.slice(a,a+1)+e.slice(a,a+1);e=n}return e}})},292:function(e,t,n){e.exports=n.p+"img/lib/e1afc72d.choose.png"},293:function(e,t,n){e.exports=n.p+"img/lib/f9aeabdb.masks.png"},294:function(e,t,n){e.exports=n.p+"img/lib/3915f498.rolling.png"},295:function(e,t,n){e.exports=n.p+"img/lib/c7946f7d.rolling_B.png"},296:function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(5);o(document.body).append("<style>.addIndex{z-index:99999}</style>");var r=function(e,t,n){this.drag=e,this.opt=n=n||{},this.move=t||e,this.delegat=!0===n.delegat,this.setDrag=n.setDrag,this.moveing=!1,this.onDragDown=n.onDragDown,this.onDragStart=n.onDragStart,this.MoveEvent=n.MoveEvent,this.UpEvent=n.UpEvent,this.dragLastPos=[],this.dragNowPos=[],this.mouseLastPos={},this.disable=!1,this.limit=n.limit,this.wrap=n.wrap,this.overflow=n.overflow,this.A=null,this.delay=this.opt.delay||9,this.delegat;var a=this;this.move.bind("mousedown.drag",function(e){a.DragDown(e)})};r.prototype={DragDown:function(e){if(this.disable)return!1;e=e||window.event;var t,n,r,i,s,l,c,u,d=this,p=o(e.target);if(this.delegat&&(p.attr("isdrag")||p.attr("isdragmove")?this.drag=p.attr("isdragmove")?p.closest("[isdrag]"):p:this.drag=null),this.drag&&this.drag.length){if(this.onDragDown&&0==this.onDragDown.call(this,e))return!1;for(this.moveing=!0,this.dragNowPos=[],this.dragLastPos=[],this.maxSize={L:[],T:[],B:[],R:[],W:null,H:null},this.group=this.group||this.drag,this.drag.addClass("addIndex"),r=0,i=this.drag.length;r<i;r++)n=this.drag.eq(r),t="static"===n.css("position"),s=t?n.offset().left:parseInt(n.css("left"),10)||0,l=t?n.offset().top:parseInt(n.css("top"),10)||0,this.wrap&&this.wrap.length&&(s-=this.wrap.offset().left-this.wrap.scrollLeft(),l-=this.wrap.offset().top-this.wrap.scrollTop()),c=n.outerWidth(),u=n.outerHeight(),this.dragLastPos.push({x:s,y:l}),t&&n.css({position:"absolute"}),n.css({left:s,top:l}),this.group&&!n.is(this.group)||(this.maxSize.L.push(s),this.maxSize.T.push(l),this.maxSize.R.push(s+c),this.maxSize.B.push(l+u));if(e.preventDefault(),this.maxSize.L=Math.min.apply(null,this.maxSize.L),this.maxSize.T=Math.min.apply(null,this.maxSize.T),this.maxSize.W=Math.max.apply(null,this.maxSize.R)-this.maxSize.L,this.maxSize.H=Math.max.apply(null,this.maxSize.B)-this.maxSize.T,this.limit&&(this.maxSize.l=this.limit.offset().left+parseInt(this.limit.css("border-left-width")),this.maxSize.t=this.limit.offset().top+parseInt(this.limit.css("border-top-width")),"static"!==this.limit.css("position")&&this.limit.find(n).length&&(this.maxSize.l=this.maxSize.t=0),this.maxSize.w=this.limit.innerWidth()-this.maxSize.W+this.maxSize.l,this.maxSize.h=this.limit.innerHeight()-this.maxSize.H+this.maxSize.t,this.overflow)){if("object"==a(this.overflow))var f=this.overflow,s=f.x,l=f.y,h=f.width,m=f.height;else{var s,l,h,m;s=l=h=m=this.overflow}this.maxSize.l-=s,this.maxSize.t-=l,this.maxSize.w+=h,this.maxSize.h+=m}if(this.mouseLastPos={x:e.clientX,y:e.clientY},this.onDragStart&&0==this.onDragStart.call(this,e))return!1;o(document).bind("mousemove.drag",function(e){d.DragMove(e)}).bind("mouseup.drag",function(e){d.DragUp(e)})}},DragMove:function(e){if(this.moveing&&!this.disable&&this.drag){e=e||window.event,e.preventDefault();var t,n,a,o,r,i={x:e.clientX-this.mouseLastPos.x,y:e.clientY-this.mouseLastPos.y},s=i.x,l=i.y,c=this.drag.length,u=this;for(this.limit&&(o=this.maxSize.L+s,r=this.maxSize.T+l,i.x=o<this.maxSize.l?this.maxSize.l-this.maxSize.L:s,i.x=o>this.maxSize.w?this.maxSize.w-this.maxSize.L:i.x,i.y=r<this.maxSize.t?this.maxSize.t-this.maxSize.T:l,i.y=r>this.maxSize.h?this.maxSize.h-this.maxSize.T:i.y),this.setOffset&&(i=this.setOffset.call(this,i)),s=i.x,l=i.y,t=0;t<c;t++)n=this.drag.eq(t),a=this.dragLastPos[t],this.dragNowPos[t]={x:a.x+s,y:a.y+l},n.css({left:this.dragNowPos[t].x,top:this.dragNowPos[t].y});this.MoveEvent&&(clearTimeout(u.A),u.A=setTimeout(function(){u.MoveEvent.call(u,{x:s,y:l,w:u.maxSize.W,h:u.maxSize.H,left:a.x+s,top:a.y+l},e)},u.delay))}},DragUp:function(e){if(!this.disable){var t=this;this.moveing=!1,o(document).off("mousemove.drag mouseup.drag"),this.drag.removeClass("addIndex"),t.A=clearTimeout(t.A),this.UpEvent&&this.UpEvent.call(this,e),this.maxSize=this.dragLastPos=this.dragNowPos=null,e.preventDefault()}}},e.exports=r},297:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(5),c=a(l),u=n(24),d=n(173),p=a(d),f=n(298),h=a(f),m=n(291);n(300);var g=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=Object.assign({},n.props);return a.color=(0,m.dealColor)(a.color),n.state={data:a},n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=(t.visible,t.children,t.onChange),a=t.onSubmit;this.pop=p.default.create({trigger:"click",effect:"normal",nearby:(0,c.default)(u.ReactDOM.findDOMNode(this))}).onShow(function(){var t=u.React.createElement(h.default,{data:e.state.data,onChange:function(t){e.setState({data:t}),n&&n(t)},onSubmit:function(t){e.setState({data:t}),e.pop.setDisplay(!1),a&&a(t)},onCancel:function(t){return e.pop.setDisplay(!1)}});e.pop.setState({template:t})}).onHide(function(){e.pop.setState({template:null})})}},{key:"render",value:function(){var e=this.props.children,t=this.state.data;return e||u.React.createElement("span",{className:"color-picker"},u.React.createElement("span",{className:t.color?"inner":"transparent",style:{backgroundColor:"#"+t.color}}))}}]),t}(u.React.Component);t.default=g},298:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(24),u=n(291),d=(0,l.default)(document),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.data;n.state={hue:"rgb(255, 0, 0)",pos:{},data:Object.assign({h:0,s:0,b:100,R:255,G:255,B:255,color:"ffffff"},r)};var i="hsb";return r.color?i="color":r.R&&(i="rgb"),n.update(i,!0),n}return r(t,e),i(t,[{key:"startChoose",value:function(e,t){var n=this;this.moveHandle(e,t),d.on("mousemove.color",function(t){n.moveHandle(e,t)}).on("mouseup.color",function(e){d.off("mousemove.color mouseup.color")})}},{key:"moveHandle",value:function(e,t){var n=this.state.data,a=(0,l.default)(this.refs[e]),o="mask"==e,r={x:t.clientX,y:t.clientY},i=r.y+(0,l.default)(window).scrollTop()-a.offset().top;if(i=i<0?0:i,i=i>255?255:i,o){n.b=100-100*i/255;var s=r.x+(0,l.default)(window).scrollLeft()-a.offset().left;s=s<0?0:s,s=s>255?255:s,n.s=100*s/255}else{n.h=360-360*i/255;var c=this.state.maxHue=n.h>=360;n.h=c?0:n.h}t.preventDefault(),this.update("hsb")}},{key:"update",value:function(e,t){var n=this.props.onChange,a=this.state,o=a.data,r=(a.pos,o),i=r.h,s=r.s,l=r.b,c=r.R,d=r.G,p=r.B,f=r.color;if("hsb"==e){var h=(0,u.HsbToRgb)(i,s,l);c=h.R,d=h.G,p=h.B}else if("rgb"==e)var m=(0,u.RgbToHsb)(c,d,p),i=m.H,s=m.S,l=m.B;else{var g=(0,u.HexToRgb)(f);if("string"==typeof g||f.length<6)return void this.setState({data:o});var c=g.R,d=g.G,p=g.B,b=(0,u.RgbToHsb)(c,d,p),i=b.H,s=b.S,l=b.B}o={h:Math.round(i),s:Math.round(s),b:Math.round(l),color:(0,u.RgbToHex)(c,d,p).toUpperCase(),R:Math.round(c),G:Math.round(d),B:Math.round(p)};var v=(0,u.HsbToRgb)(i,100,100);this.state.hue="rgb("+Math.round(v.R)+", "+Math.round(v.G)+", "+Math.round(v.B)+")",t&&(this.state.maxHue=!i),this.getPos(o),t?this.state.data=o:(n&&n(o),this.setState({data:o}))}},{key:"getPos",value:function(e){var t=this.state,n=t.maxHue,a=t.pos,o=e.h,r=e.s,i=e.b;a.roll_top=n?-3:(360-o)/360*255-3,a.left=255*r/100-6,a.top=255*(100-i)/100-6}},{key:"changeHandle",value:function(e,t){var n=this.state.data,a=t.target.value;if(this.state.maxHue=!1,"color"==e)return n[e]=a,void this.update(e);a=parseInt(a),a=isNaN(a)?n[e]:a,e.toLowerCase()!=e?(a=a<0||a>255?n[e]:a,n[e]=a,this.update("rgb")):(a="h"==e?a<0||a>359?n[e]:a:a<0||a>100?n[e]:a,n[e]=a,this.update("hsb"))}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,n=e.onCancel,a=this.state,o=a.hue,r=a.data,i=a.pos;return c.React.createElement("div",{className:"color-picker-box clearfix"},c.React.createElement("div",{className:"mask",ref:"mask",style:{background:o},onMouseDown:this.startChoose.bind(this,"mask")},c.React.createElement("div",{className:"b"}),c.React.createElement("div",{className:"c",style:{top:i.top,left:i.left}})),c.React.createElement("div",{className:"roll",ref:"roll",onMouseDown:this.startChoose.bind(this,"roll")},c.React.createElement("div",{className:"c",style:{top:i.roll_top}})),c.React.createElement("div",{className:"r"},c.React.createElement("span",{className:"preview"},c.React.createElement("i",{style:{background:"#"+r.color}}),"颜色"),c.React.createElement("dl",null,c.React.createElement("dd",null,c.React.createElement("label",null,"H："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"h"),value:r.h}),"度"),c.React.createElement("dd",null,c.React.createElement("label",null,"S："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"s"),value:r.s}),"%"),c.React.createElement("dd",null,c.React.createElement("label",null,"B："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"b"),value:r.b}),"%")),c.React.createElement("dl",null,c.React.createElement("dd",null,c.React.createElement("label",null,"R："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"R"),value:r.R})),c.React.createElement("dd",null,c.React.createElement("label",null,"G："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"G"),value:r.G})),c.React.createElement("dd",null,c.React.createElement("label",null,"B："),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"B"),value:r.B})),c.React.createElement("dd",{className:"color"},c.React.createElement("label",null,"#"),c.React.createElement("input",{onChange:this.changeHandle.bind(this,"color"),value:r.color}))),c.React.createElement("button",{onClick:function(e){return t(r,e)},className:"nj-button nj-button-red nj-button-small ok"},"确定"),c.React.createElement("button",{onClick:function(e){return n(r,e)},className:"nj-button nj-button-small close"},"取消")))}}]),t}(c.React.Component);t.default=p},299:function(e,t,n){t=e.exports=n(47)(void 0),t.push([e.i,"#nj_color{position:absolute;background:#f5f5f5;padding:15px;border:1px solid;width:380px;border-color:#e4e4e4 #ccc #ccc #e4e4e4;display:none;z-index:999}#nj_color .mask{border:1px solid;border-color:#bbb #fff #fff #bbb;width:255px;height:255px;position:relative;float:left;background:red}#nj_color .mask .b{position:absolute;top:0;left:0;width:100%;height:100%;background:url("+n(293)+")}#nj_color .mask .c{position:absolute;top:-6px;left:-6px;width:12px;height:12px;background:url("+n(292)+")}#nj_color .roll{width:20px;height:255px;margin:0 12px;float:left;position:relative;background:url("+n(294)+")}#nj_color .roll .c{width:32px;height:9px;background:url("+n(295)+");position:absolute;top:-3px;left:-5px}#nj_color .r{float:right}#nj_color .preview{text-align:center;display:inline-block}#nj_color .preview i{display:block;width:70px;height:40px;border:1px solid;border-color:#bbb #fff #fff #bbb;background:#fff}#nj_color .r dl{margin:5px 0 0}#nj_color .r dd label{display:inline-block;width:21px}#nj_color .r dd input{width:25px;padding:1px 3px;line-height:15px;border-radius:3px;border:1px solid;border-color:#ccc #eee #eee #ccc;margin:0 5px 0 0}#nj_color .r dd{padding:1px 0 2px}#nj_color .r .color{padding:6px 0}#nj_color .r .color label{width:auto}#nj_color .r .color input{width:50px}.color-picker{display:inline-block;border:1px solid #bbb;border-radius:2px;background:#fff;width:12px;height:12px;vertical-align:middle;position:relative}.color-picker .transparent{border-top:1px solid #eb5648;transform:translateY(-50%) rotate(45deg);transform-origin:0 0;width:150%;position:absolute;top:0;left:0}.color-picker .inner{display:inline-block;width:10px;height:10px;vertical-align:top;margin:1px}.color-picker-box{background:#f5f5f5;padding:15px;border:1px solid;width:400px;border-color:#e4e4e4 #ccc #ccc #e4e4e4}.color-picker-box .mask{border:1px solid;border-color:#bbb #fff #fff #bbb;width:255px;height:255px;position:relative;float:left}.color-picker-box .mask .b{position:absolute;top:0;left:0;width:100%;height:100%;background:url("+n(293)+")}.color-picker-box .mask .c{position:absolute;top:-6px;left:-6px;width:12px;height:12px;background:url("+n(292)+")}.color-picker-box .roll{width:20px;height:255px;margin:0 12px;float:left;position:relative;background:url("+n(294)+")}.color-picker-box .roll .c{width:32px;height:9px;background:url("+n(295)+");position:absolute;top:-3px;left:-5px}.color-picker-box .r{float:right}.color-picker-box .preview{text-align:center;display:inline-block}.color-picker-box .preview i{display:block;width:70px;height:40px;border:1px solid;border-color:#bbb #fff #fff #bbb;background:#fff}.color-picker-box .r dl{margin:5px 0 0}.color-picker-box .r dd label{display:inline-block;width:21px}.color-picker-box .r dd input{width:25px;padding:1px 3px;line-height:15px;border-radius:3px;border:1px solid;border-color:#ccc #eee #eee #ccc;margin:0 5px 0 0}.color-picker-box .r dd{padding:1px 0 2px}.color-picker-box .r .color{padding:6px 0}.color-picker-box .r .color label{width:auto}.color-picker-box .r .color input{width:50px}",""])},300:function(e,t,n){var a=n(299);"string"==typeof a&&(a=[[e.i,a,""]]);n(48)(a,{insertAt:"top"});a.locals&&(e.exports=a.locals)},74:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(5),u=(a(c),n(17)),d=(n(46),n(297)),p=a(d),f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return s(t,e),l(t,[{key:"changeHandle",value:function(e,t,n){var a=this.props.data,r=o({},e,t);a=Object.assign({},a),n?Object.assign(a[n],r):Object.assign(a,r),this.props.onChange(a)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.x,a=t.y,o=t.style,r=o.width,i=o.height,s=o.color,l=o.fontSize;return u.React.createElement("div",{className:"props-panel"},u.React.createElement("h6",null,"属性："),u.React.createElement("ul",{className:"nj-form"},u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"x:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:n,onChange:function(t){return e.changeHandle("x",parseInt(t.target.value))},className:"text"}),"px")),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"y:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:a,onChange:function(t){return e.changeHandle("y",parseInt(t.target.value))},className:"text"}),"px")),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"宽度:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:r,onChange:function(t){return e.changeHandle("width",parseInt(t.target.value),"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"高度:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:i,onChange:function(t){return e.changeHandle("height",parseInt(t.target.value),"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"颜色:"),u.React.createElement("div",{className:"fields"},u.React.createElement(p.default,{color:s,onChange:function(t){return e.changeHandle("color","#"+t.color,"style")},className:"text"}))),u.React.createElement("li",{className:"item clearfix"},u.React.createElement("span",{className:"lab"},"字号:"),u.React.createElement("div",{className:"fields"},u.React.createElement("input",{type:"number",value:l,onChange:function(t){return e.changeHandle("fontSize",parseInt(t.target.value),"style")},className:"text"})))))}}]),t}(u.React.Component);t.default=f},75:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.innerText;if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var n=window.getSelection(),t=document.createRange();t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBannerOptions=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(5),u=a(c),d=n(17),p=n(296),f=a(p),h=n(173),m=a(h),g=n(74),b=a(g),v=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.layers,i=void 0===a?[]:a;return n.state={layers:i},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.root;t.canvas.el.click(function(t){(0,u.default)(t.target).closest(".layer").length||e.setState({focus:null})}),(0,u.default)(document).keydown(function(t){var n=t.keyCode,a=e.state,o=a.layers,r=a.focus;if(46==n&&r){var i=o.indexOf(r);o.splice(i,1),console.log(n,i),e.setState({layers:o,focus:null})}}),this.propsPanel=m.default.create({trigger:"click",effect:"normal",delegate:["div.layer",t.canvas.areas],position:{left:80,top:"-100"}}).onShow(function(){e.state.focus;(0,d.render)(d.React.createElement(b.default,{data:e.state.focus,onChange:function(t){Object.assign(e.state.focus,t),e.forceUpdate()}}),e.propsPanel.wrap.childNodes[0])})}},{key:"getKey",value:function(){return+new Date+"_"+parseInt(1e5*Math.random())}},{key:"push",value:function(e){var t=this,n=this.state.layers;e.key=this.getKey(),n.push(e),this.setState({layers:n,focus:e},function(){return t.refs.focus.click()})}},{key:"setFocus",value:function(e,t){this.setState({focus:e})}},{key:"componentDidUpdate",value:function(e,t){var n=this.refs.editor;n&&t.editor!=this.state.editor&&(n.focus(),s(n))}},{key:"componentDidUpdate",value:function(e,t){!this.state.focus&&this.propsPanel.setDisplay(!1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.layers,a=t.focus,o=t.editor,r=this.props.root;return d.React.createElement("div",null,n.map(function(t){return d.React.createElement(y,{key:t.key,limit:r.canvas.el,onDragDown:e.setFocus.bind(e,t),MoveEvent:function(e){t.x=e.left,t.y=e.top}},d.React.createElement("div",{onDoubleClick:function(n){return e.setState({editor:t})},className:"layer"+(a===t?" drag-focus":""),style:Object.assign({top:t.y,left:t.x},t.style),ref:a==t?"focus":"layer"},d.React.createElement("div",{className:"inner",dangerouslySetInnerHTML:{__html:t.html}})))}),o?d.React.createElement("div",{className:"layer-mask",style:Object.assign({top:o.y,left:o.x},o.style)},d.React.createElement("div",{className:"inner",contentEditable:"true",ref:"editor",onBlur:function(){var t=(0,u.default)(e.refs.editor),n=t.height();o.style.height=n;var a=n/2-t.parent().height()/2;o.y+=a,e.setState({editor:null})},onKeyUp:function(e){o.html=e.target.innerHTML},dangerouslySetInnerHTML:{__html:o.html}})):null)}}]),t}(d.React.Component);t.default=v;var y=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=(0,u.default)(d.ReactDOM.findDOMNode(this)),t=Object.assign({},this.props);this.drag=new f.default(e,e.children(),t)}},{key:"getSize",value:function(){var e=(0,u.default)(d.ReactDOM.findDOMNode(this)),t=e.width(),n=e.height();return{x:-t/2,y:-n/2,width:t/2,height:n/2}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return this.props.children}}]),t}(d.React.Component);t.getBannerOptions=function(e){var t=void 0,n=void 0,a=void 0,o=void 0,r=e.props.root;return{onDragDown:function(i){var s=r.canvas,l=s.el,c=s.areas,p=l.offset(),f=p.top,h=p.left;n=f,a=h,t=c.filter('[data-dragarea="'+i.target+'"]'),o=(0,u.default)(d.ReactDOM.findDOMNode(e)).offset().left},onDragMove:function(e,n){var i=r.canvas,s=i.el,l=i.areas;r.canvas.target=null,l.removeClass("drag-active");var c=t.offset().top,u=t.outerHeight(),d=a,p=s.outerWidth();e>d&&e<d+p&&n>c&&n<c+u&&e<o&&(r.canvas.target=t.addClass("drag-active"))},onDragUp:function(e,t,o){var i=r.canvas,s=(i.el,i.target);if(i.areas.removeClass("drag-active"),s){var l=t-n,c=e-a,u=o.module.style,d=Object.assign({x:c-u.width/2,y:l-u.height/2},o.module);r.state.data[o.target].layers.push(d)}r.canvas.target=null}}}},76:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getContentOptions=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(5),c=a(l),u=n(17),d=n(296),p=a(d),f=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.layers,i=void 0===a?[]:a;return n.state={layers:i},n}return i(t,e),s(t,[{key:"push",value:function(e,t){var n=this.state.layers;t>=n.length?n.push(e):n.splice(t,0,e),e.id=n.length,this.setState({layers:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.layers;t.focus,t.editor,this.props.root;return u.React.createElement("div",null,n.map(function(t,a){return u.React.createElement(h,{key:t.id,layers:n,parent:e,index:a},u.React.createElement("div",{className:"content-item",ref:"layer-"+a},u.React.createElement("div",{className:"inner"},u.React.createElement("div",{className:"ct-head"},t.id),u.React.createElement("div",{className:"ct-body"}))))}),u.React.createElement("div",{className:"content-item d_hide drag-holder drag-newholder",ref:"holder"}))}}]),t}(u.React.Component);t.default=f;var h=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=(0,c.default)(u.ReactDOM.findDOMNode(this)),n=this.props,a=n.onDragDown,o=(n.onDragMove,n.onDragUp),r=n.parent,i=(0,c.default)("div.canvas-content"),s=void 0;this.holder=t.clone().addClass("drag-holder"),this.drag=new p.default(t,null,{wrap:i}),this.drag.onDragDown=function(n){var o=t.offset();t.css({position:"absolute",top:o.top,left:o.left,width:t.width()}).addClass("drag-target").after(e.holder),i.addClass("drag-active"),a&&a.call(this,e.props),s=e.props.index},this.drag.MoveEvent=function(n,a){for(var o=a.clientY,i=void 0,l=void 0,u=void 0,d=e.props.layers,p=0;p<d.length+1;p++)if(i=(0,c.default)(r.refs["layer-"+p]),i.length&&(l=i.offset().top,u=i.outerHeight(!0),i[0]!==t[0]&&i[0]!==e.holder[0]&&o>l&&o<l+u)){s>p?e.holder.insertBefore(i):e.holder.insertAfter(i);var f=d[s];d.splice(s,1),d.splice(p,0,f),s=p;break}},this.drag.UpEvent=function(n){e.holder.after(t),e.holder.remove(),t.removeClass("drag-target").removeAttr("style"),i.removeClass("drag-active"),o&&o.call(this),r.forceUpdate()}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return this.props.children}}]),t}(u.React.Component);t.getContentOptions=function(e){var t=void 0,n=void 0,a=void 0,o=void 0,r=e.props.root,i=r.state.data.content.layers,s=void 0;return{onDragDown:function(s){var l=r.canvas,d=l.el,p=l.areas,f=d.offset(),h=f.top,m=f.left;n=h,a=m,t=p.filter('[data-dragarea="'+s.target+'"]'),o=(0,c.default)(u.ReactDOM.findDOMNode(e)).offset().left,i=r.state.data.content.layers},onDragMove:function(e,n){var l=r.canvas,u=l.el,d=l.areas;r.canvas.target=null,d.removeClass("drag-active");var p=t.offset().top,f=t.outerHeight(),h=a,m=u.outerWidth();if(e>h&&e<h+m&&n>p&&n<p+f&&e<o){r.canvas.target=t.addClass("drag-active");for(var g=t.find("div.drag-newholder").show(),b=void 0,v=void 0,y=void 0,x=i.props.layers,w=0;w<x.length+1;w++){if(b=(0,c.default)(i.refs["layer-"+w]),v=b.offset().top,y=b.outerHeight(!0),n<v+y/2){g.insertBefore(b),s=w;break}g.insertAfter(b),s=w+1}}},onDragUp:function(e,t,o){var l=r.canvas,c=(l.el,l.target);if(l.areas.removeClass("drag-active"),c){var u=t-n,d=e-a,p=Object.assign({x:d,y:u},o.module);i.push(p,s)}c&&c.find("div.drag-newholder").hide(),r.canvas.target=null}}}},78:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(5),c=a(l),u=n(17),d=n(296),p=a(d),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=(0,c.default)(u.ReactDOM.findDOMNode(this)),n=this.props,a=n.onDragDown,o=n.onDragMove,r=n.onDragUp;this.holder=t.clone(),this.drag=new p.default(t,null,{wrap:(0,c.default)("div.page-side")});var i=void 0,s=void 0;this.drag.onDragDown=function(n){var o=t.offset();t.css({position:"absolute",top:o.top,left:o.left}).addClass("drag_target").after(e.holder),a&&a.call(this,e.props),t.find(".layer").css({top:100*(n.clientY-o.top)/t.innerHeight()+"%",left:100*(n.clientX-o.left)/t.innerWidth()+"%"}),i=n.clientX,s=n.clientY},this.drag.MoveEvent=function(t,n){i=n.clientX,s=n.clientY,o&&o.call(this,i,s,e.props)},this.drag.UpEvent=function(n){e.holder.remove(),t.removeClass("drag_target").removeAttr("style"),r&&r.call(this,i,s,e.props)}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return this.props.children}}]),t}(u.React.Component);t.default=f},80:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(5),u=(a(c),n(17)),d=(n(174),n(297)),p=a(d),f=n(78),h=a(f),m=n(46),g=n(75),b=n(76),v=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.bannerOptions=(0,g.getBannerOptions)(n),n.contentOptions=(0,b.getContentOptions)(n);var a=[{name:"h1",style:{width:500,height:40,fontSize:20},html:"<p>输入大标题……</p>"},{name:"h2",style:{width:400,height:32,fontSize:16},html:"<p>输入小标题……</p>"}],i=[{name:"list"}];return n.state={bannerModules:a,contentModules:i},n}return i(t,e),l(t,[{key:"setStyle",value:function(e,t,n){var a=this.props.root,o=a.state.data;o[e].css[t]=n,a.setState({data:o})}},{key:"render",value:function(){var e=this,t=this.props.root,n=this.state,a=n.bannerModules,o=n.contentModules,r=t.state.data,i=r.body,l=r.banner;return u.React.createElement("div",{className:"page-side"},u.React.createElement("h6",null,"页面"),u.React.createElement("div",{className:"mb15 side-body"},u.React.createElement("div",null,"背景色 ",u.React.createElement(p.default,{color:i.css["background-color"],onChange:function(t){e.setStyle("body","background-color","#"+t.color)}})),u.React.createElement("div",null,"背景图片 ",u.React.createElement(m.Input,{defaultValue:i.css["background-image"],onChange:function(t){e.setStyle("body","background-image","url("+t.target.value+")")}}))),u.React.createElement("h6",null,"Banner"),u.React.createElement("div",{className:"mb10 side-body"},u.React.createElement("div",null,"背景色 ",u.React.createElement(p.default,{color:l.css["background-color"],onChange:function(t){e.setStyle("banner","background-color","#"+t.color)}})),u.React.createElement("div",null,"背景图片 ",u.React.createElement(m.Input,{defaultValue:l.css["background-image"],onChange:function(t){e.setStyle("banner","background-image","url("+t.target.value+")")}})),u.React.createElement("div",null,"高度:",u.React.createElement(m.Input,{defaultValue:parseFloat(l.css.height),onChange:function(t){e.setStyle("banner","height",parseFloat(t.target.value)+"px")}}))),a.map(function(t){return u.React.createElement(h.default,s({key:t.name},e.bannerOptions,{module:t,target:"banner"}),u.React.createElement("div",{className:"banner-module"},u.React.createElement("div",{className:"name"},t.name),u.React.createElement("div",{className:"layer",style:t.style},u.React.createElement("div",{className:"inner",dangerouslySetInnerHTML:{__html:t.html}}))))}),u.React.createElement("h6",null,"Content"),o.map(function(t){return u.React.createElement(h.default,s({key:t.name},e.contentOptions,{module:t,target:"content"}),u.React.createElement("div",{className:"content-module"},u.React.createElement("div",{className:"name"},t.name)))}))}}]),t}(u.React.Component);t.default=v}});