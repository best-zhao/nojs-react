webpackJsonp([11],{301:function(t,e,n){"use strict";var i=n(24),s=i.React,o=i.ReactDOM,a=i.utils,l=s.createClass({displayName:"Mask",mixins:[i.mixins.setDisplay],getDefaultProps:function(){return{effect:"fade"}},statics:function(){var t,e,n=!0;return{show:function(a){e=e||i.utils.createContainer("nj-mask ng-layer-wrap"),this.mask=t=o.render(s.createElement(l,null),e),t.setState({name:a}),t.setDisplay(!0),n&&c.complete(t),n=null},hide:function(){t&&(t.setDisplay(!1),t.setState({name:""}))}}}(),componentDidMount:function(){a.stopScroll(o.findDOMNode(this),function(t){t.preventDefault()})},render:function(){var t=this.state,e=t.name,n=t.className;return s.createElement("div",{ref:"layer",className:a.joinClass(e,n)})}});t.exports=l;var c=a.addEventQueue.call(l,"onInit")},309:function(t,e,n){"use strict";var i=n(24),s=n(5),o=n(186),a=n(301),l=i.React,c=i.ReactDOM,r=i.mixins,u=[],p=[],d=function(t){t&&(p.indexOf(t)<0&&p.push(t),p.forEach(function(e){e.setState({isFocus:e===t})}))},f=function t(){t.init||(t.init=1,s(document).on("keydown",function(t){if(27==t.keyCode){var e=p.slice(-1)[0];e&&e.props.bindEsc&&e.setDisplay(!1)}}))},m={create:function(t){t=t||{};var e=c.render(l.createElement(h,t),i.utils.createContainer("nj-popup-container ng-layer-wrap"));return f(),u.push(e),e},hide:function(){u.forEach(function(t,e){t.setDisplay(!1)})},destory:function(t){u.forEach(function(e,n){e===t&&(u.splice(n,1),document.body.removeChild(c.findDOMNode(e).parentNode))})},alert:function(t){t=Object.assign({title:"提示：",bindEsc:!1,buttons:[{text:"确定",className:"nj-button nj-button-red",handle:function(t){return!0}}]},t),t.name=i.utils.joinClass("popup-alert popup-tip",t.name);var e=h.create(t);return e.onHide(function(){h.destory(this)}),window.setTimeout(function(){e.setDisplay(!0)},1),e},confirm:function(t){t=Object.assign({title:"提示：",showClose:!1,name:"popup-confirm popup-tip",buttons:[{text:"确定",className:"nj-button nj-button-red",handle:function(t){return!0}},{text:"取消",className:"nj-button"}]},t),t.template=l.createElement("div",null,l.createElement("span",{className:"nj-icon nj-icon-warn"}),l.createElement("div",{className:"_content"},t.template));var e=h.create(t);return e.onHide(function(){h.destory(this)}),e.setDisplay(!0),e},tip:function(){return{show:function(t,e,n){n=n||{},h.tip.hide();var i=void 0!==n.timer?n.timer:1500;"loading"==t?e=e||"loading……":i&&setTimeout(function(){s.setDisplay(!1)},i);var s=h.tip.handle=h.alert({title:"",template:l.createElement("div",{className:"tip-area tip-"+t},l.createElement("i",{className:"nj-icon nj-icon-"+t}),l.createElement("span",{className:"tip-text",dangerouslySetInnerHTML:{__html:e}})),showMask:!1,buttons:null}),o=n.reload;o&&s.onShow(function(){window.setTimeout(function(){"string"==typeof o?window.location.href=o:window.location.reload()},1500)})},hide:function(){var t=h.tip.handle;t&&t.setDisplay(!1)}}}()},h=l.createClass({displayName:"Popup",mixins:[o,r.setDisplay],statics:m,getDefaultProps:function(){return{effect:"drop",showMask:!0,bindEsc:!0}},getInitialState:function(){return{buttons:this.props.buttons||[],title:this.props.title||"",template:this.props.template}},componentWillMount:function(){this.thenEvent=i.utils.addEventQueue.call(this,"then")},componentDidMount:function(){this.setAlign({nearby:window,position:this.props.position,element:c.findDOMNode(this)}),this.onShow(function(){this.props.showMask&&a.show(),d(this),this.align.set({position:this.props.position})}).onHide(function(){var t=this;p.pop();var e;p.forEach(function(n){n.props.showMask&&n!==t&&(e=n)}),this.props.showMask&&!e&&a.hide(),this.setState({isFocus:null}),d(p.slice(-1)[0]),this.thenEvent.complete(this.res)})},componentWillUnmount:function(){console.log(this)},buttonHandle:function(t,e){this.res=t&&t.call(this,e);e.isDefaultPrevented()||this.setDisplay(!1)},cancel:function(){this.res=!1,this.setDisplay(!1)},render:function(){var t=this.state.template;t="function"==typeof t?t.call(this):t;var e=l.createElement("div",{className:"_body",ref:"body"},t);"string"==typeof t&&(e=l.createElement("div",{className:"_body",ref:"body",dangerouslySetInnerHTML:{__html:t}}));var n=i.utils.joinClass("nj-popup",this.state.className,this.state.isFocus&&"popup-active",this.props.name),s=this.state.buttons;return l.createElement("div",{className:n},l.createElement("div",{className:"_close",onClick:this.cancel}),l.createElement("div",{className:"_head"},this.state.title),e,l.createElement("div",{className:s.length?"_foot":"d_hide"},s.map(function(t,e){var n=t.className;return n||(n="nj-button ",n+=0==e?"nj-button-red":"nj-button-default"),l.createElement("button",{key:e,ref:"button"+e,type:"button",className:n,onClick:this.buttonHandle.bind(this,t.handle)},t.text)}.bind(this))))}});t.exports=h},91:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var s=n(309),o=i(s),a=n(5),l=i(a),c=n(173),r=i(c);e.init=function(){var t=o.default.create({title:"Popup Title",template:"<div>12</div>",buttons:[{text:"确定"},{text:"取消"}]});(0,l.default)("#showPopup").click(function(){return t.setDisplay(!0)}),(0,l.default)("#alertPopup").click(function(){return o.default.alert({template:"操作成功！"})}),(0,l.default)("#confirmPopup").click(function(){return o.default.confirm({template:"确认操作?"}).then(function(t){o.default.tip.show("ok",t?"选择了是":"选择了否")})}),r.default.create({template:'<div style="width:200px;height:140px">12313</div>',effect:"normal",nearby:"demo-popover-button"})}}});